<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Usuario Estudiante</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
        <link href="../css/movil.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="../css/general.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="../css/usuarios.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="../css/galois.min.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="../css/jquery.mobile.icons.min.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="../css/jquery.mobile.structure-1.4.0.min.css" rel="stylesheet" type="text/css" media="screen"/>
        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/jquery.mobile-1.4.0.min.js"></script>
        <script src="../js/mootools-core-1.4.5.js" type="text/javascript"></script>
        <script src="../js/envios.js" type="text/javascript" ></script>
        <script src="../phonegap.js" type="text/javascript"></script>
        <script>
            
            $(document).ready(function(){
                
                
                function cargarAcudidos(){
                    //alert(localStorage.getItem('idPersona'));
                    var x = $("#content");
                    var $this = $( this ),
                        theme = $this.jqmData( "theme" ) || $.mobile.loader.prototype.options.theme,
                        msgText = $this.jqmData( "msgtext" ) || $.mobile.loader.prototype.options.text,
                        textVisible = $this.jqmData( "textvisible" ) || $.mobile.loader.prototype.options.textVisible,
                        textonly = !!$this.jqmData( "textonly" ),
                        html = $this.jqmData( "html" ) || "";
                    
                    $.mobile.loading( "show", {
                            text: msgText,
                            textVisible: textVisible,
                            theme: theme,
                            textonly: textonly,
                            html: html
                    });

                    var idPersona = localStorage.getItem('idPersona');
                           var url="http://controlacademico.liceogalois.com/acudiente/usuarioAcudienteMovil";
                           //var url="/colegio/estudiante/datosAcademicosMovil";
                           var data="idPersona="+idPersona;

                           envioJson2(url,data,function respuesta(res){   
                               x.html(res);
                               $.mobile.loading( "hide" );  
                            });
                          
                }
                
                function notificaciones(){
                    
                     var $this = $( this ),
                        theme = $this.jqmData( "theme" ) || $.mobile.loader.prototype.options.theme,
                        msgText = $this.jqmData( "msgtext" ) || $.mobile.loader.prototype.options.text,
                        textVisible = $this.jqmData( "textvisible" ) || $.mobile.loader.prototype.options.textVisible,
                        textonly = !!$this.jqmData( "textonly" ),
                        html = $this.jqmData( "html" ) || "";
                    $.mobile.loading( "show", {
                            text: msgText,
                            textVisible: textVisible,
                            theme: theme,
                            textonly: textonly,
                            html: html
                    });
            //  var url="/colegio/estudiante/notificacionesMovil";     
            var url="http://controlacademico.liceogalois.com/estudiante/notificacionesMovil";
            var data="idPersona="+localStorage.getItem('idPersona');

            envioJson2(url,data,function respuesta(res){
                $('#content').html(res);
                $.mobile.loading( "hide" );  
            });
                }
            function seguimiento(){
                    
                     var $this = $( this ),
                        theme = $this.jqmData( "theme" ) || $.mobile.loader.prototype.options.theme,
                        msgText = $this.jqmData( "msgtext" ) || $.mobile.loader.prototype.options.text,
                        textVisible = $this.jqmData( "textvisible" ) || $.mobile.loader.prototype.options.textVisible,
                        textonly = !!$this.jqmData( "textonly" ),
                        html = $this.jqmData( "html" ) || "";
                    $.mobile.loading( "show", {
                            text: msgText,
                            textVisible: textVisible,
                            theme: theme,
                            textonly: textonly,
                            html: html
                    });
            //  var url="/colegio/estudiante/notificacionesMovil";     
            var url="http://controlacademico.liceogalois.com/estudiante/seguimientoMovil";
            var data="idPersona="+localStorage.getItem('idPersona');

            envioJson2(url,data,function respuesta(res){
                $('#content').html(res);
                $.mobile.loading( "hide" );  
            });
        }
        
           function pension(){
                    
                     var $this = $( this ),
                        theme = $this.jqmData( "theme" ) || $.mobile.loader.prototype.options.theme,
                        msgText = $this.jqmData( "msgtext" ) || $.mobile.loader.prototype.options.text,
                        textVisible = $this.jqmData( "textvisible" ) || $.mobile.loader.prototype.options.textVisible,
                        textonly = !!$this.jqmData( "textonly" ),
                        html = $this.jqmData( "html" ) || "";
                    $.mobile.loading( "show", {
                            text: msgText,
                            textVisible: textVisible,
                            theme: theme,
                            textonly: textonly,
                            html: html
                    });
            //  var url="/colegio/estudiante/notificacionesMovil";     
            var url="http://controlacademico.liceogalois.com/estudiante/pensionMovil";
            var data="idPersona="+localStorage.getItem('idPersona');

            envioJson2(url,data,function respuesta(res){
                $('#content').html(res);
                $.mobile.loading( "hide" );  
            });
        }
        
                function cargarNotas2(){
                    //alert(localStorage.getItem('idPersona'));
                     $('#content').html("<p>Cargando....</p>");
                    $('#content').load('http://controlacademico.liceogalois.com/estudiante/datosAcademicosMovil/'+localStorage.getItem('idPersona')); 
                    //$('#content').load('/colegio/estudiante/datosAcademicosMovil/'+localStorage.getItem('idPersona')); 
                           
                }
                
                function cargaPanel(){
                    var $this = $( this ),
                        theme = $this.jqmData( "theme" ) || $.mobile.loader.prototype.options.theme,
                        msgText = $this.jqmData( "msgtext" ) || $.mobile.loader.prototype.options.text,
                        textVisible = $this.jqmData( "textvisible" ) || $.mobile.loader.prototype.options.textVisible,
                        textonly = !!$this.jqmData( "textonly" ),
                        html = $this.jqmData( "html" ) || "";
                    $.mobile.loading( "show", {
                            text: msgText,
                            textVisible: textVisible,
                            theme: theme,
                            textonly: textonly,
                            html: html
                    });
            //  var url="/colegio/administrador/panelMovil";     
            var url="http://controlacademico.liceogalois.com/administrador/panelMovil";
            var data="idPersona="+localStorage.getItem('idPersona')+"&panel=acudiente";

                  
                  envioJson2(url,data,function respuesta(res){
                $('#panelEst').html(res);
                $.mobile.loading( "hide" );  
                  });
                
                }
                cargaPanel();
               cargarAcudidos();
    
            });
            
             
               
               
               
            document.addEventListener("deviceready", function(){
   
         
         document.addEventListener("pause", onPause, false);
          document.addEventListener("offline", onOffline, false);
          document.addEventListener("backbutton", onBackKeyDown, true);
         
    }, true);
    
    function onBackKeyDown() {
        navigator.app.exitApp();
    }

    // Handle the pause event
    //
    function onPause() {
      
    }
    
    function onOffline() {
        alert("Por Favor Conectese a una Red");
    }
           
        </script>
    </head>
    <body>
        <div data-role="page" style="background-color: white;">
            <div data-role="panel" data-position="left" data-display="push" id="panelEst" class="sombra">
                <p>Recargar</p>
            </div><!-- /panel -->
            
            <div data-role="header" data-position="fixed"> 
                <h1>Liceo Galois</h1>
               <a href="#panelEst" data-display="overlay" data-icon="bars" class="ui-btn ui-shadow ui-corner-all ui-icon-bars ui-btn-icon-notext">Delete</a>
            </div>
            
            <div id="content" style="background-color: white;">Bienvenido... !</div>
            
        </div>
    </body>
</html>
